{% extends 'layouts/page.njk' %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/fieldset/macro.njk" import govukFieldset %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% set showBackLink = true %}
{% block content %}
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            {# Error summary placeholder at the top #}
            {% if aggregatedErrors.length %}
                {{ govukErrorSummary({
                    titleText: translations['there-is'],
                    errorList: aggregatedErrors
                }) }}
            {% endif %}
            <form id="update-bank-form" method="post" action="/update-bank-details" class="govuk-form-group" novalidate>
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--xl">
                        <span class="govuk-caption-xl">{{ translations['request-to'] }}</span>
                        <h1 class="govuk-fieldset__heading">{{ translations['new-bank'] }}</h1>
                    </legend>
                    <div class="govuk-form-group govuk-!-margin-top-4">
                        <p class="govuk-body govuk-!-font-weight-regular">{{ translations['requested-by'] }}</p>
                        <p class="govuk-body govuk-!-font-weight-bold govuk-!-margin-top-2 govuk-!-margin-bottom-4">
                            {{ authedUser.displayName }}
                        </p>
                    </div>
                    <div class="govuk-form-group">
                        <p class="govuk-body govuk-!-font-weight-regular">{{ translations['local-authority-name'] }}</p>
                        <p class="govuk-body govuk-!-font-weight-bold govuk-!-margin-top-2 govuk-!-margin-bottom-4">
                            {{ authedUser.organisationName }}
                        </p>
                    </div>
        {% call govukFieldset({
          legend: {
            classes: "govuk-fieldset__legend--l",
            isPageHeading: false
          }
        }) %}
        {{ govukInput({
            label: { text: translations['account-name']  },
            id: "accountName",
            name: "accountName",
            value: payload.accountName,
            spellcheck: false,
            errorMessage: errors.accountName,
            attributes: { maxlength: "256" }
          }) }}

          {{ govukInput({
            label: { text: translations['sort-code'] },
            hint: { text: translations['must-be'] },
            id: "sort-code",
            name: "sortCode",
            inputmode: "numeric",
            value: payload.sortCode,
            errorMessage: errors.sortCode,
            spellcheck: false,
            classes: "govuk-input--width-5 govuk-input--extra-letter-spacing",
            attributes: { maxlength: "8" },
            autocomplete: "sort-code"
          }) }}

          {{ govukInput({
            label: { text: translations['account-number'] },
            hint: { text: translations['must-be-between'] },
            id: "account-number",
            name: "accountNumber",
            inputmode: "numeric",
            value: payload.accountNumber,
            errorMessage: errors.accountNumber,
            spellcheck: false,
            classes: "govuk-input--width-10",
            attributes: { maxlength: "10" },
            autocomplete: "account-number"
          }) }}

                    {% endcall %}
                </fieldset>
                <div class="govuk-!-margin-top-6">
                    {{ govukButton({
        text: translations['continue'],
        type: "submit"
      }) }}
                </div>
            </div>
        </div>


        
    {% endblock %}