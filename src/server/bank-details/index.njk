{% extends 'layouts/page.njk' %}

{% block content %}
<div class="govuk-grid-row">
<div class="govuk-grid-column-two-thirds">
{% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}
  {% if authedUser.currentRole  == 'Chief Executive Officer' and bankApiData.confirmed === false %}
    {% set html %}
      <p class="govuk-notification-banner__heading">
        {{ translations['the-nominated-h'] }}
      </p>
    {% endset %}

    {{ govukNotificationBanner({
      titleText: translations['important'],
      html: html
    }) }}
  {% endif %}

{% if userPermissions.confirmBankDetails and bankApiData.confirmed === false %}
  {% set htmlHof %}
    <p class="govuk-notification-banner__heading">
      {{ translations['please-confirm-'] }}<br>
      <a class="govuk-link" href="/bank-details/confirm?lang={{ currentLang }}">
        {{ translations['please-confirm-link'] }}
      </a>
    </p>
  {% endset %}

  {{ govukNotificationBanner({
    titleText: translations['important'],
    html: htmlHof
  }) }}
{% endif %}

  {% from "govuk/components/table/macro.njk" import govukTable %}
  {% from "govuk/components/tag/macro.njk" import govukTag %}

{{ appHeading({
    text: authedUser.organisationName,
    caption: translations['bank-details'] 
  }) }}
<div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1em;">
  <h2 class="govuk-heading-s">
    {{ translations['your-local'] }}
  </h2>
 {% if bankApiData.confirmed %}
  {{ govukTag({
    text: translations['confirmed'],
    classes: "govuk-tag--green"
  }) }}
{% else %}
  {{ govukTag({
    text: translations['unconfirmed'],
    classes: "govuk-tag--red"
  }) }}
{% endif %}
</div>

{% from "govuk/components/table/macro.njk" import govukTable %}

{{ govukTable({
  firstCellIsHeader: true,
  rows: [
    [
      {
        text: translations['account-name'] 
      },
      {
        text: bankApiData.accountName 
      }
    ],
    [
      {
        text: translations['sort-code'] 
      },
      {
        text: bankApiData.sortCode
      }
    ],
    [
      {
        text: translations['account-number']
      },
      {
        text: bankApiData.accountNumber
      }
    ]
  ]
}) }}

{% from "govuk/components/details/macro.njk" import govukDetails %}

{% set detailsHtml %}
  <p>{{ translations['to-update-your-'] }}, {{ translations["please-raise-a-"] | safe }}</p>

  <p><strong>{{ translations['email'] }}</strong><br>
    <a href="mailto:{{ translations['eprcustomerserv'] }}">{{ translations['eprcustomerserv'] }}</a><br>
    {{ translations['we-aim-to-respo'] }}
  </p>

 <p>
  <strong>{{ translations['telephone'] }}</strong><br>
  0300-060-0002<br>
  {{ translations['monday-to-frida'] }}
</p>
{% endset %}

{{ govukDetails({
  summaryText: translations['change-your-loc'],
  html: detailsHtml
}) }}
{% endblock %}